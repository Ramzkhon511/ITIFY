$(document).ready((function(){function showResult(status,error){$("#support_form .sfm-err").remove();let text="Thank you for submitting the form! We will reply to you as soon as possible";status?($("#support_form .sr-modal-form").hide(),$("#support_form .description").append("<span>"+text+"</span>")):(text=error,$('<div class="sfm-err"">'+text+"</div>").insertBefore("#support_form .hs_submit"))}function onClickModal(){$("#support_form .sfm-err").remove(),$('#support_form input[type="submit"]').remove(),$("#support_form .sfm-submit").remove(),$("#support_form form textarea").val(""),$('#support_form form input[type="text"]').val(""),$('#support_form form input[type="email"]').val(""),$('#support_form form input[type="tel"]').val(""),$('#support_form form input[type="number"]').val(""),$('#support_form form input[type="file"]').val(""),$("#support_form .sr-modal-form").show(),$("#support_form .description").empty(),$("#support_form .hs_attachments .input").off("click"),$("#support_form .submit").off("click"),$("#support_form .actions").append('<input type="button" class="hs-button primary large submit sfm-submit" value="Submit"></input>'),$("#support_form .hs_attachments .input").on("click",(function(e){$(e.target)[0]&&"hs-input"!==$(e.target)[0].className&&document.querySelector("#support_form .hs_attachments input").click()})),$('#support_form select[name="reason_for_contact"]').on("change",(function(){setTimeout((function(){$("#support_form form textarea").val(""),$('#support_form form input[name="wallet_address"]').val(""),$('#support_form form input[name="version_of_device"]').val(""),$('#support_form form input[name="model_of_device"]').val(""),$('#support_form form input[name="0-2\\/name"]').val(""),$('#support_form form input[name="0-2\\/website"]').val("")}),0)})),$("#support_form .submit").on("click",(async function(){const reason=$('#support_form select[name="reason_for_contact"]').val(),message=$('#support_form textarea[name="message"]').val(),email=$('#support_form input[name="email"]').val(),name=$('#support_form input[name="contact_name"]').val();if(!(reason&&message&&email&&name))return showResult(status,"Please complete all required fields."),!1;if($(".hs-error-msg").length>0)return showResult(status,"Please complete all required fields."),!1;const file=$('input[name="attachments"]')[0].files[0],imageUrl=await async function(file){if(!file)return null;let formData=new FormData;formData.append("files",file);try{const response=await fetch("https://dashboard.safemoon.com/api/upload/public/upload-image-awss3?folder=support",{method:"POST",body:formData});return response.ok?(await response.json()).data.image:(console.error("Failed to post data:",response.statusText),null)}catch(error){return console.error("An error occurred:",error),null}}(file);let data=null;if("APP_BUG_OR_ISSUE"===reason){data={message:message,email:email,name:name,attachments:[imageUrl||""],productLine:"SAFEMOON_WALLET",supportType:{label:"Wallet app bug or issue",value:"APP_BUG_OR_ISSUE"},walletAddress:$('input[name="wallet_address"]').val(),versionOfDevice:$('input[name="version_of_device"]').val(),modelOfDevice:$('input[name="model_of_device"]').val()}}else if("FEEDBACK_OR_INPUT"===reason)data={message:message,email:email,name:name,attachments:[imageUrl||""],productLine:"SAFEMOON_WALLET",supportType:{label:"Wallet feedback or input",value:"FEEDBACK_OR_INPUT"}};else{data={message:message,email:email,name:name,attachments:[imageUrl||""],productLine:"SAFEMOON_WALLET",supportType:{label:"General or other",value:"GENERAL_OR_OTHER"},company:$('input[name="0-2\\/name"]').val(),websiteURL:$('input[name="0-2\\/website"]').val()}}try{const response=await fetch("https://dashboard.safemoon.com/api/support/create",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(data)});if(!response.ok){const err=await response.json();return showResult(!1,err?err.message:"Something went wrong"),!1}showResult(!0)}catch(error){return showResult(!1,error),!1}}))}$("#hs_cos_wrapper_widget_1681892113259 .feature-row .col-md-4:nth-child(1) a").click((function(){return $("#support_form").modal("show"),setTimeout((function(){onClickModal()}),0),!1}))}));
//# sourceURL=https://cdn2.hubspot.net/hub/23134290/hub_generated/template_assets/119347707451/1686734106882/sr/js/custom-talk.js