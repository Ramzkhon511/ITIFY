!function(e){var t={};function o(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};e[n].call(i.exports,i,i.exports,o);i.l=!0;return i.exports}o.m=e;o.c=t;o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})};o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"});Object.defineProperty(e,"__esModule",{value:!0})};o.t=function(e,t){1&t&&(e=o(e));if(8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);o.r(n);Object.defineProperty(n,"default",{enumerable:!0,value:e});if(2&t&&"string"!=typeof e)for(var i in e)o.d(n,i,function(t){return e[t]}.bind(null,i));return n};o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};o.d(t,"a",t);return t};o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)};o.p="//static.hsappstatic.net/video-embed/static-1.11520/";o(o.s=15)}({15:function(e,t,o){"use strict";o.r(t);const n=9/16;let i;!function(e){e.SET_UTK="SET_UTK";e.SET_PAGE_META="SET_PAGE_META";e.SET_CURRENT_TIME="SET_CURRENT_TIME";e.SET_PLAYBACK_RATE="SET_PLAYBACK_RATE";e.UPDATE_DISPLAY_OPTIONS="UPDATE_DISPLAY_OPTIONS";e.SET_PLAYER_STATUS="SET_PLAYER_STATUS";e.CONFIRM_VISIBLE="CONFIRM_VISIBLE";e.CTA_SKIPPED="CTA_SKIPPED";e.CTA_CLICKED="CTA_CLICKED";e.FORM_SKIPPED="FORM_SKIPPED";e.FORM_SUBMITTED="FORM_SUBMITTED";e.VIDEO_LOADED="VIDEO_LOADED";e.PLAYER_LOADED="PLAYER_LOADED";e.PLAYER_READY="PLAYER_READY";e.PLAYER_PLAY="PLAYER_PLAY";e.PLAYER_PAUSE="PLAYER_PAUSE";e.PLAYER_ENDED="PLAYER_ENDED";e.PLAYER_PROGRESS="PLAYER_PROGRESS";e.PLAYER_SHOW_OVERLAY="PLAYER_SHOW_OVERLAY";e.PLAYER_ORPHANED="PLAYER_ORPHANED";e.PLAYER_ANALYTICS_EVENTS="PLAYER_ANALYTICS_EVENTS";e.PLAYER_SECONDS_VIEWED="PLAYER_SECONDS_VIEWED";e.TRACKED_PLAY="TRACKED_PLAY"}(i||(i={}));const r=["region","posterUrl","playButtonColor","play_button_color","playButtonShape","play_button_shape","preview","richTextPreview","playerType","autoplay","autoPlay","loop","muted","hiddenControls","hidden_controls","hostApp","renderContext","parentUrl","maxHeight","objectFit","playbackRate"],s=1e3,a="/share/hubspotvideo/",l="VIDEO_PLAYER_ENV",d="-qa.js",c=[".hubspotqa.com",".hubspotvideoqa.com",".hsappstatic.net"],u=/http(s?):\/\/(app|local)(-\w+)?.hubspot(qa)?.com/;let h=!1;function p(e,t=!0){if(!t&&h)return null;try{return localStorage.getItem(e)}catch(e){h=!0;return null}}const f=()=>window[l];function m(){return f()?"local"===f():"local"===p(l)||!!window.location.search.includes("_hsVideoEnv=local")}function g(){if(fe()||"qa"===p(l))return!0;if(f())return"qa"===f();const e=D();return c.some(e=>window.location.hostname.endsWith(e))||e&&e.endsWith(d)}function y(e={}){const t=e.region||me(),o=t?"-"+t:"";if(e&&"prod"===e.env)return`https://${m()?"local":"play"}.hubspotvideo.com`;if(b()){if(g()&&!m()&&!me())return"https://app.hubspotqa.com";if(!e.region&&!e.env)return window.location.origin}if(m())return g()?"https://local.hubspotvideoqa.com":"https://local.hubspotvideo.com";return`https://play${o}.${g()||"qa"===e.env?"hubspotvideoqa.com":"hubspotvideo.com"}`}function E(){return"jasmineRequire"in window}function b(e){return!(E()&&!e)&&Boolean((e||window.location).origin.match(u))}function w(){return Boolean(p("selenium.disable.alarms"))}const v="hs_video_debug";function P(){return!!(m()||window.hsVideoDebug||window.location.search.includes("debug=true"))||"true"===p(v)}function A(...e){if(P()){const t=e.shift();console.log.apply(console,["[hs-video] "+t,...e])}}const _="hs-script-loader",I="/hs/scriptloader/",R=/video-embed\/ex\/loader(-qa)?.js/,T="div.hs-video-widget[data-hsv-embed-id]"+":not([data-hsv-status])",S="iframe[data-hsv-src]";function C(e){return[].slice.call(document.querySelectorAll(e))}function L(e,t){return[].slice.call(e.querySelectorAll(t))}function O(){return C("script[src]").find(e=>R.test(e.src)||e.src.endsWith("/video-embed/static/bundles/loader.js"))}function M(){const e=document.getElementById(_);if(e&&e.src&&e.src.includes(I)){const t=document.createElement("a");t.href=e.src;const o=t.pathname.replace(I,"").replace(".js",""),n=Number(o);if(n>0)return n}return null}function D(){const e=O();return e?e.src:null}function $(e,t=!1){return t?document.querySelector(`[data-hsv-embed-id="${e}"]:not([data-hsv-status])`):document.querySelector(`[data-hsv-embed-id="${e}"]`)}function k(){return"interactive"===document.readyState||"complete"===document.readyState}const V=1e4;function x(e){const t=document.createElement("script");return new Promise((o,n)=>{let i=!1;t.onload=()=>{i=!0;o()};t.onerror=()=>n(new Error("loadScript failed for: "+e));t.src=e;document.getElementsByTagName("head")[0].appendChild(t);setTimeout(()=>{i||n(new Error("loadScript timed out for: "+e))},V)})}function N(e,t={}){e instanceof HTMLElement&&Object.assign(e.style,t)}function Y(e,t){t.startsWith(".")||(t="."+t);for(;e&&e.parentElement;){if(e.parentElement.matches&&e.parentElement.matches(t))return!0;e=e.parentElement}return!1}function j(e){const t=e.getBoundingClientRect();return t.bottom>0&&t.right>0&&t.left<window.innerWidth&&t.top<window.innerHeight}function q(e){const{backgroundColor:t}=getComputedStyle(e);return"transparent"===t||"rgba(0, 0, 0, 0)"===t}function F(e){const t=parseInt(e.substring(1),16);return.2126*(t>>16&255)+.7152*(t>>8&255)+.0722*(t>>0&255)}function U(e){const t=document.createElement("iframe");t.src=`${y()}/video-preloader/${pe()}`;N(t,{display:"none",width:0,height:0,border:"0 none"});A("Created preloader iframe",t);t.addEventListener("load",()=>{A("Preloader iframe loaded, removing from page.");t.remove();e()});document.body.appendChild(t)}const W="outpost",H="na1";function B(e=""){return e&&e!==H?"-"+e:""}const K=(e="")=>"forms"+B(e),G=(e="")=>"exceptions"+B(e),Q=(e=!1)=>e?"hubspotqa.com":"hubspot.com",J=(e=!1)=>e?"hs-embed-reportingqa.com":"hs-embed-reporting.com",z=({hublet:e="",isQa:t=!1}={})=>`https://${K(e)}.${Q(t)}/${W}`,X=({hublet:e="",isQa:t=!1}={})=>`https://${G(e)}.${J(t)}/${W}`;function Z(e,...t){let o,n=0;e=e||{};for(;n<t.length;)if(t[n]){for(o in t[n])t[n].hasOwnProperty(o)&&(e[o]=t[n][o]);n++}else n++;return e}function ee(e,t){if(!t)return!1;for(let o=0;o<e.length;o++)if(t.indexOf(e[o])>-1)return!0;return!1}function te(e){let t="";for(const o in e)e.hasOwnProperty(o)&&(t+=`${o}=${e[o]};`);return t}const oe=({isEmbedApp:e=!1,env:t="PROD",hublet:o=""})=>{const n="PROD"!==t;return e?X({isQa:n,hublet:o}):z({isQa:n,hublet:o})};class ne{constructor(e,t){t=t||{};e||console.warn("The projectName parameter is required");this.projectName=e;this.env=(t.env||"PROD").toUpperCase();this.hublet=t.hublet||"";this.isEmbedApp=t.isEmbedApp||!1;this.level=(t.level||"ERROR").toUpperCase();this.disabled=t.disabled||!1;this.baseUrl=t.baseUrl||oe({isEmbedApp:this.isEmbedApp,env:this.env,hublet:this.hublet});this.tags=t.tags||{};this.cookies=t.cookies||{};this.user=t.user||{}}bindToWindow(e=[],t=[]){e.length<1?console.warn("You need to specify allowlisted domains when binding to window errors or you will catch all page errors"):window.onerror=(o,n,i,r,s)=>{n&&ee(e,n)&&!ee(t,s.message)&&"script error"!==o.toLowerCase()&&this.sendReport("error",o,n,s)}}report(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("error",e.message,e.fileName,e,t)}}reportMessage(e,t,o={}){if(e){o.silent&&console.error(e);this.sendReport("info",e,window.location.href,void 0,t)}}debug(e,t){if(e&&"DEBUG"===this.level){console.debug(e);this.sendReport("debug",e.message,e.fileName,e,t)}}addTags(e){Z(this.tags,e)}addCookies(e){Z(this.cookies,e)}addUserContext(e){Z(this.user,e)}sendReport(e,t,o,n,i){if(this.disabled){console.warn("Not reporting error to Outpost because logging is disabled");return}o=o||(window.document.currentScript?window.document.currentScript.src:null)||window.location.href;const r=this.buildReport(e,t,o,n,i),s=new Image,a=encodeURIComponent(JSON.stringify(r));s.src=`${this.baseUrl}/${this.projectName}/error.gif?report=${a}`;s.onload=()=>{console.log("Completed reporting error to "+this.projectName)}}buildReport(e,t,o,n,i={}){const r=n?n.name:"Message";let s;s=n&&n.message?n.message.substring(0,999):t.substring(0,999);return{culprit:r,message:s,level:e,exception:[{type:r,value:n&&n.stack&&n.stack.substring(0,999)||s,url:o}],request:{url:`${window.location.protocol}//${window.location.host+window.location.pathname}`,queryString:window.location.search.replace(/(^\?)/,""),cookies:te(this.cookies)},environment:this.env,tags:Z(this.tags),user:this.user,extra:i}}}var ie=ne;const re=5;let se,ae=0;function le(){se||(se=new ie("video-embed",{env:fe()?"qa":null,debug:P(),tags:{domain:window.location.origin,portalId:pe()||void 0,hublet:me()||void 0}}));return se}function de(){return!(E()||w()||ae>=re)}function ce(e,t={}){A("Reporting message to outpost",e);if(de()){le().reportMessage(e,t);ae++}}function ue(e,t={}){A("Reporting error to outpost",e);if(de()){le().report(e,t);ae++}}function he(){return window.hsVars?window.hsVars:null}function pe(){const e=O();return e&&e.dataset.hsPortalId?Number(e.dataset.hsPortalId):he()?he().portal_id:M()}function fe(){const e=O();if(e&&e.dataset.hsEnv)return"qa"===e.dataset.hsEnv;const t=he();return!(!t||!t.app_hs_base_url)&&t.app_hs_base_url.includes("hubspotqa.com")}function me(){const e=O();if(b()){const e=window.location.hostname.split(".")[0];if(e.includes("-"))return e.split("-")[1]}if(e&&e.dataset.hsRegion)return e.dataset.hsRegion;const t=he();if(t&&t.app_hs_base_url){const e=t.app_hs_base_url.split("//")[1].split(".")[0];return e.includes("-")?e.split("-")[1]:null}return null}function ge(){const e=O();return e&&e.dataset.hsPageId?Number(e.dataset.hsPageId):he()?he().page_id:null}function ye(){return he()?he().language:null}function Ee(){return Boolean(window.hsInEditor)}function be(){return window.location.pathname.startsWith(a)}const we="hs-content-id-";function ve(){let e=null;document.body.classList.forEach(t=>{t.includes(we)&&(e=parseInt(t.replace(we,""),10))});return e||null}function Pe(){return window.hsVideoOptions||{}}function Ae(){const e={pageUrl:window.location.href,pageTitle:document.title,pageId:ge()};be()&&(e.pageId=0);if("number"==typeof e.pageId)return e;if(!b())if(ve()){e.pageId=ve();ce("Missing expected hsVars context, parsed pageId from body classname")}else ce("Missing expected hsVars context");return e}const _e={INITIAL:"INITIAL",LOADING:"LOADING",READY:"READY",PLAYING:"PLAYING",PAUSED:"PAUSED",ENDED:"ENDED",CONVERSION_ASSET_OVERLAY:"CONVERSION_ASSET_OVERLAY",ERROR:"ERROR"};let Ie,Re;!function(e){e.FORM="FORM";e.CTA="CTA"}(Ie||(Ie={}));!function(e){e.PRE="PRE";e.POST="POST";e.CUSTOM="CUSTOM"}(Re||(Re={}));const Te={DEFAULT:"hsvideo-mux",VIDEOJS_RAW_URL:"videojs-raw-url",HTML5:"html5",IN_APP_PREVIEW:"inAppPreview",EDITOR_PREVIEW:"editorPreview",RICH_TEXT_PREVIEW:"richTextPreview",ACADEMY_IN_APP:"academy"};function Se(e,t=[]){return Object.keys(e).filter(e=>t.includes(e)).reduce((t,o)=>Object.assign({},t,{[o]:e[o]}),{})}function Ce(e){return Object.values?Object.values(e):Object.keys(e).map(t=>e[t])}function Le(e=window.location.search){const t={};"?"===e[0]&&(e=e.substring(1));e.split("&").forEach(e=>{const[o,n]=e.split("=");if(o&&n)try{t[o]=decodeURIComponent(n)}catch(i){A("Could not decode query param: "+e);t[o]=n}});return t}function Oe(e){const t={};Object.keys(e).forEach(o=>{(e[o]||"number"==typeof e[o])&&(t[o]=e[o])});return Object.keys(t).map(e=>`${e}=${encodeURIComponent(t[e])}`).join("&")}function Me(e){return"object"==typeof e&&Object.keys(e).length?"?"+Oe(e):""}const De=["type","id","position","overlayDelaySeconds","preventSkip"];function $e(e){return De.map(t=>e[t]?String(e[t]):"").join("_")}function ke(e){const t=he(),o=t&&"number"==typeof t.page_id?t.page_id:ve(),n=window.location.origin||`${window.location.protocol}//${window.location.hostname}`,i=Object.assign({},Se(e,r),{parentOrigin:n,pageId:o,locale:ye()});i.parentOrigin||ce("window.location is missing - "+document.documentURI);P()&&(i.debug=!0);Ee()&&(i.playerType=Te.EDITOR_PREVIEW);const s=Le();Pe().hidePosterImage&&(i.hidePosterImage=!0);s._hsVideoForm?e.conversionAsset={type:Ie.FORM,position:Re.PRE,id:s._hsVideoForm}:s._hsVideoCta&&(e.conversionAsset={type:Ie.CTA,position:Re.PRE,id:s._hsVideoCta});"object"==typeof e.conversionAsset&&e.conversionAsset.type&&e.conversionAsset.id&&(i.ca=$e(e.conversionAsset));if(i.playButtonColor){i.playButtonColor=i.playButtonColor.replace("#","");"ffffff"===i.playButtonColor&&delete i.playButtonColor}1===i.playbackRate&&delete i.playbackRate;"100%"===e.height&&("100%"===e.width||e.full_width)&&(i.objectFit="cover");return i}function Ve(e,t,o={},n,i,r){let s="video";if(e&&t){const o=i&&i.playerType===Te.ACADEMY_IN_APP;s=b()&&!o?`video/${e}/id/${t}`:`v/${e}/id/${t}`}m()&&!b()&&me()&&(o.region=me());const a={};if(n){a.hsvid=n;a.t=Date.now();r&&(a.afterPreload=!0)}const l=Me(a).replace("?","#");return`${y(i)}/${s}${Me(o)}${l}`}const xe='\n  <div class="hsv-overlay-close" aria-label="Close" role="button" data-action="close" \n       style="position: absolute; display: block; top: 15px; right: 15px; width: 16px; height: 16px; background: transparent; cursor: pointer">\n    <svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" style="position: absolute; top: 0; stroke: white; stroke-width: 2px">\n      <path d="M14.5,1.5l-13,13m0-13,13,13" transform="translate(-1 -1)"></path>\n    </svg>\n    <span style="position: absolute; padding: 20px; border-radius: 100%; top: -12px; left: -12px; background: rgba(255, 255, 255, 0.1)" />\n    <style>\n      .hsv-overlay-close > span { display: none; }\n      .hsv-overlay-close:hover > span { display: block; }\n    </style>\n  </div>\n',Ne=e=>/^\d+$/.test(e);function Ye(e,t){return Ne(t.id)?`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n      <div class="hs-cta-embed hs-cta-simple-placeholder hs-cta-embed-${t.id}">\n        <a target="_blank" rel="noopener noreferrer">\n          <img\n            alt="Video CTA"\n            src="${je(t.id,e)}"\n          />\n        </a>\n      </div>\n      ${t.preventSkip?"":xe}\n    </div>\n    `:`\n    <div class="hsv-cta-wrapper hsv-overlay" style="position: absolute; display: flex; width: 100%; height: 100%;\n                                        align-items: center; justify-content: center;">\n        <span class="hs-cta-node hs-cta-${t.id}" id="hs-cta-${t.id}">\n          <a target="_blank" rel="noopener noreferrer">\n            <img\n              class="hs-cta-img"\n              id="hs-cta-img-${t.id}"\n              alt="Video CTA"\n              src="${je(t.id,e)}"\n            />\n          </a>\n        </span>\n        ${t.preventSkip?"":xe}\n      </div>\n    `}function je(e,t){let o="//no-cache."+(g()?"hubspotqa.com":"hubspot.com");"eu1"===me()&&(o=g()?"//hubspot-no-cache-eu1-qa.s3.amazonaws.com":"//hubspot-no-cache-eu1-prod.s3.amazonaws.com");return`${o}/cta/default/${t}/${Ne(e)?"interactive-"+e:e}.png`}function qe(e,t){const{id:o}=t,n=document.createElement("div");n.innerHTML=Ye(e.portalId,t);const r=n.firstElementChild;e.getWrapperEl().append(r);const s=()=>{e.postMessageToPlayer(i.CTA_SKIPPED);r.style.display="none"},a=()=>{e.postMessageToPlayer(i.CTA_CLICKED);r.style.display="none"},l=r.querySelector(".hsv-overlay-close");l&&l.addEventListener("click",s);const d=()=>{if(!window.hbspt||!window.hbspt.cta){ce("Could not load CTA JS");s();return}window.hbspt.cta._relativeUrls=!0;window.hbspt.cta.canonicalURL=window.location.href;const t={region:me()||"na1",useNewLoader:!0,enforceTargetIsBlank:!0};g()&&(t.env="qa");e.el.querySelector(".hs-cta-node").addEventListener("click",a);window.hbspt.cta.load(e.portalId,o,t);window.hbspt.cta.loadQueue()},c=()=>{if(!window.__PRIVATE__HubspotCtaClient||"function"!=typeof window.__PRIVATE__HubspotCtaClient.loadCta){ce("Web interactive API not found after load");s();return}const e=r.querySelector(".hs-cta-simple-placeholder");window.hsCtasOnReady=window.hsCtasOnReady||[];window.hsCtasOnReady.push(()=>{window.__PRIVATE__HubspotCtaClient.loadCta({contentId:Number(t.id),options:{openInNewTab:!0,elementToEmbed:e,onNavigate:a}})})};if(Ne(t.id))if(window.__PRIVATE__HubspotCtaClient)c();else{let e=window.location.origin+"/hs/cta/web-interactives-embed.js";b()&&(e=g()?"https://js.hubspotqa.com/web-interactives-embed.js":"https://js.hscta.net/web-interactives-embed.js");x(e).then(c).catch(e=>{ce("Failed to load web interactive JS",{errorMessage:String(e)});s()})}else if(window.hbspt&&window.hbspt.cta)d();else{let e=window.location.origin+"/hs/cta/cta/current.js";b()&&(e=g()?"https://js.hubspotqa.com/cta/current.js":"https://js.hscta.net/cta/current.js");x(e).then(d).catch(e=>{console.error("Failed to display CTA",e);ce("Failed to display CTA",{errorMessage:String(e)});s()})}}let Fe;function Ue(){if(!Fe)try{Fe=window.scrollTo;window.scrollTo=(...e)=>{A("Prevented scrollTo with args:",...e)}}catch(e){A("Failed to patch window.scrollTo to prevent forms auto-scroll",e)}}function We(){if(Fe){try{window.scrollTo=Fe}catch(e){A("Failed to un-patch window.scrollTo to restore auto-scroll ability",e)}Fe=void 0}}const He="hsv-form-wrapper",Be=".hs-submit .hs-button",Ke=155,Ge=9,Qe="Thanks for your response!";function Je(e){return`\n      <div class="hsv-overlay hsv-form-modal" style="position: absolute; top: 0; bottom: 0; left: 0; right: 0;">\n        <div class="${He}" style="height: 100%; overflow-y: auto; padding: 20px 40px; text-align: left">\n          <div class="hsv-form" />\n        </div>\n        ${e.preventSkip?"":xe}\n      </div>\n  `}const ze=(e,t)=>{const o=e.querySelector("form");if(!o){A("Form el not found in onFormReady callback");return}const n=o.querySelector("div.actions");n&&N(n,{margin:0,padding:0});if(!t||"#ffffff"===t)return;"#"!==t[0]&&(t="#"+t);const i=F(t)>Ke;try{const o=e.querySelector("form "+Be);if(!o){A("Could not find form submit button to apply color to");return}N(o,{backgroundColor:t,borderColor:t});i&&N(o,{color:"black"})}catch(e){console.error("Failed to update form submit button color",e)}};function Xe(e,t){let o,n=!1,r=!1;const{id:s}=t,a=document.createElement("div");a.innerHTML=Je(t);const l=a.firstElementChild;e.getWrapperEl().append(l);const d=l.querySelector(".hsv-form"),c=()=>{We();e.postMessageToPlayer(n?i.FORM_SUBMITTED:i.FORM_SKIPPED,{isLegacyForm:r});l.style.display="none"},u=()=>{e.postMessageToPlayer(i.FORM_SUBMITTED,{isLegacyForm:r});l.style.display="none"},h=()=>{We();n=!0;const e=l.querySelector(".submitted-message")||d;if(!l.querySelector(".hsv-overlay-close")){const e=document.createElement("div");e.innerHTML=xe;e.querySelector(".hsv-overlay-close").addEventListener("click",()=>u());l.appendChild(e.firstElementChild)}const t='\n      <div style="margin-top: 10px; text-align: center">\n        <a data-test-id="form-watch-video" style="cursor: pointer">Watch video</a>\n      </div>\n    ',o=document.createElement("div");o.innerHTML=t;o.querySelector("a").addEventListener("click",()=>u());e.append(o.firstElementChild)},p=e.el.querySelector(".hsv-overlay-close");p&&p.addEventListener("click",c);const f=()=>{if(window.HubSpotForms){Ue();e.form=window.HubSpotForms.create({formId:s,portalId:e.portalId,env:g()?"qa":null,region:me(),target:e.getPlaceholderSelector()+" .hsv-form",css:"",onFormDefinitionFetchSuccess:e=>{o=e.form;o&&o.formTypeNumber===Ge&&(r=!0)},onFormReady:()=>{const n=l.querySelector("form");n&&q(n)&&N(d,{background:"white",padding:"10px 20px"});ze(l,e.options.playButtonColor);if(o.redirectUrl&&t.position!==Re.POST){A(`Overriding redirectUrl ${o.redirectUrl} with generic inlineMessage`);e.form.setContext({inlineMessage:Qe,redirectUrl:""})}},getExtraMetaDataBeforeSubmit:()=>({hs_video_id:e.options.id,hs_video_title:e.video?e.video.title:null}),onFormSubmitted:()=>setTimeout(h,0)})}else{ce("Could not load Forms JS");c()}};if(window.HubSpotForms)f();else{x(`//js.${g()?"hsformsqa.net":"hsforms.net"}/forms/embed/v2.js`).then(f).catch(e=>{console.error("Failed to display form",e);ce("Failed to display form",{errorMessage:String(e)});c()})}}const Ze=[_e.INITIAL,_e.LOADING,_e.READY],et="video-embed-js",tt="hubl-iframe",ot=()=>window.performance.now?window.performance.now():null,nt=(e,t)=>{const o=e.filter(e=>"number"==typeof e.timings[t]).map(e=>e.timings[t]);return o.length?Math.round(Math.min(...o)):null},it=e=>{let t=et;e.some(e=>e.options.renderContext&&e.options.renderContext.startsWith("hubl-iframe"))&&(t=tt);return{embedType:t,embedVersion:1,firstVideoLoadedAt:nt(e,"loadedAfterMs"),firstVideoReadyAt:nt(e,"readyAfterMs"),firstVideoPlayedAt:nt(e,"playedAfterMs"),numHsVideos:e.length,numAutoplay:e.filter(e=>e.options.autoplay).length,numInitiallyVisible:e.filter(e=>e.initiallyVisible).length,numInteractedWith:e.filter(e=>!Ze.includes(e.status)).length,secondsOfVideoPlayed:e.reduce((e,t)=>e+(t.timings.secondsViewed||0),0)}},rt="hsv",st="ca",at=["id","width","height"],lt={fullWidth:"full_width"},dt=[".slick-slide.slick-cloned",".swiper-slide-duplicate"],ct=e=>`${e[0].toLowerCase()}${e.slice(1)}`;function ut(e){let t=e.querySelector("img[data-hsv-id]");t||(t=e.querySelector("iframe[data-hsv-src]"));if(!t)return null;const o=Object.assign({},t.dataset),n={embedId:e.dataset.hsvEmbedId};Object.keys(o).forEach(e=>{let t=o[e];(e=ct(e.replace(rt,"")))in lt&&(e=lt[e]);"true"===t?t=!0:"false"===t?t=!1:at.includes(e)&&(e.includes("%")||Number.isNaN(Number(t))||(t=Number(t)));if(e.startsWith("ca")){e=ct(e.replace(st,""));n.conversionAsset=n.conversionAsset||{};"overlayDelaySeconds"===e&&(t=Number(t));n.conversionAsset[e]=t}else n[e]=t});return n}function ht(e){return!dt.some(t=>Y(e,t))}function pt(e=document.body){const t=L(e,T).filter(e=>e.querySelector("img[data-hsv-id]")),o=t.filter(ht);o.length!==t.length&&A(`Found only ${o.length} valid placeholders out of ${t.length} total.`,t);const n=o.map(ut),i={};o.forEach((e,t)=>{const o=n[t];o&&o.embedId&&(i[o.embedId]={id:o.embedId,el:e,options:o})});Object.keys(i).length!==n.length&&A(`Found only ${Object.keys(i).length} unique embedIds for ${n.length} placeholders.`,o);return Ce(i)}function ft(e=document.body){return L(e,T).filter(e=>e.querySelector(S)).map(e=>({el:e,options:ut(e)}))}class mt{constructor(e,t,o,n){this.status=_e.INITIAL;this.confirmedVisible=!1;this.initiallyVisible=!1;this.preloaderIframeLoaded=!1;this.iframeLoaded=!1;this.getWrapperEl=()=>this.el.matches(".hs-video-wrapper")?this.el:this.el.querySelector(".hs-video-wrapper");this.injectPlayer=()=>{const{options:e,placeholderEl:t}=this;if(t.querySelector(S))this.iframeEl=t.querySelector(S);else{if(this.selectIframeElFromPage()){ce("injectPlayer found iframe el on page via selector, not inserting again.");this.replaceIframeFromPage();return}if(!t){ce("injectPlayer cannot find placeholder, no way to render!");return}this.injectIframe(t);t.setAttribute("data-hsv-status","rendered")}if(b()||e.playerType===Te.IN_APP_PREVIEW||e.playerType===Te.EDITOR_PREVIEW||e.autoplay)this.onConfirmVisible();else{setTimeout(()=>this.confirmRendered(),s);if(window.IntersectionObserver)try{this.setupIntersectionObserver()}catch(e){this.log("Failed to setup IntersectionObserver",e);ce("Failed to setup IntersectionObserver",{err:String(e)});this.onConfirmVisible()}else{ce("Missing IntersectionObserver constructor");this.onConfirmVisible()}}};this.injectIframe=e=>{e.appendChild(this.el);const t=e.querySelector("img[data-hsv-id]");if(t&&t.src){this.el.style.backgroundImage=`url(${t.src})`;this.el.style.backgroundSize="contain";this.el.style.backgroundRepeat="no-repeat";this.el.style.backgroundPosition="center"}this.hidePlaceholderImage()};this.hidePlaceholderImage=()=>{const e=this.placeholderEl.querySelector("img[data-hsv-id]");e&&e.style.setProperty("display","none","important")};this.on=(e,t)=>{this.eventTarget?this.eventTarget.addEventListener(e,t):console.log("Browser does not support EventTarget API, on is a no-op.")};this.trigger=e=>{this.eventTarget&&this.eventTarget.dispatchEvent(e)};this.onConfirmVisible=()=>{const e=this.iframeEl.getAttribute("data-hsv-src");if(e){const[t]=e.split("#"),o=t.split("?");let n=o[0];const i=Le(o[1]||"");i.parentOrigin=window.location.origin;i.renderContext=this.options.renderContext;m()&&(n=n.replace("play","local"));this.iframeEl.src=`${n}?${Oe(i)}#hsvid=${this.id}`;this.iframeEl.removeAttribute("data-hsv-src")}else{const e=this.iframeEl.getAttribute("src");if(!e||!/http(s?):/.test(e)){this.hidePlaceholderImage();this.iframeEl.src=this.buildIframeUrl();this.el.style.backgroundImage="none"}}this.status=_e.LOADING;this.postMessageToPlayer(i.CONFIRM_VISIBLE);this.confirmedVisible=!0};this.log=(...e)=>{A(`(${this.id})`,...e)};this.id=e;this.portalId=t;this.options=o;this.outgoingMessages=[];this.receivedMessages=[];this.timings={constructedAt:ot()};this.placeholderEl=n||$(this.id,!0);this.el=this.createPlayerIframe();this.iframeEl=this.el.querySelector("iframe");if(window.EventTarget)try{this.eventTarget=new EventTarget}catch(e){A("Cannot construct EventTarget, cannot support event handler API.",e)}}createPlayerIframe(){const{id:e,options:t,placeholderEl:o}=this;if(o&&o.querySelector(S)&&o.querySelector(".hs-video-wrapper")){A("Found server-rendered iframe for player "+e,t,o);return o.querySelector(".hs-video-wrapper")}A("Rendering iframe for player "+e,t,o);const i="100%"===t.height&&("100%"===t.width||t.full_width);let r="",s="",a=t.style||"",l="";if(i)s=r="position: absolute; width: 100%; height: 100%";else{const e="string"==typeof t.width?Number(t.width):t.width;let o="string"==typeof t.height?Number(t.height):t.height;const i=e&&o?o/e*100:100*n;if("number"==typeof t.maxHeight){o=t.maxHeight;l=`max-height: ${t.maxHeight}px`}let d=e?`max-width: ${e}px; `:"";const c=o&&t.maxHeight&&o>=t.maxHeight?`max-height: ${t.maxHeight}px; `:"";if("boolean"==typeof t.full_width){a||(a="margin: 0 auto;");t.full_width&&(d="")}r=`${d} ${c} ${a}`;s=`position: relative; height: 0; padding-bottom: ${i}%;`}const d=document.createElement("div");d.innerHTML=`\n    <div class="hs-video-container" style="${r.trim()}">\n      <div class="hs-video-wrapper" style="${s.trim()}">\n        <iframe id="hs_player_${e}"\n          loading="lazy"\n          referrerPolicy="origin" \n          sandbox="allow-forms allow-scripts allow-same-origin allow-popups"\n          allow="autoplay; fullscreen;"\n          style="position: absolute !important; width: 100% !important; height: 100% !important; left: 0; top: 0; border: 0 none; pointer-events: initial; ${l}">\n        </iframe>\n      </div>\n    </div>\n  `;return d.firstElementChild}getPlaceholderSelector(){return`[data-hsv-embed-id="${this.id}"]`}findPlaceholderEls(){return C(this.getPlaceholderSelector())}findOtherPlaceholderEls(){return this.findPlaceholderEls().filter(e=>e!==this.placeholderEl&&ht(e))}selectIframeElFromPage(){const e=C("iframe#hs_player_"+this.id);if(e.length>1){A("Found multiple iframes for player",e);ce("Found multiple iframes for player")}return e[0]}confirmRendered(){if(document.contains(this.el))return;if(this.selectIframeElFromPage()){ce("confirmRendered found new iframe el on page via selector.");this.replaceIframeFromPage();return}const e=this.findOtherPlaceholderEls();e.length?ce("confirmRendered found duplicate placeholders for player",{embedId:this.id,otherPlaceholderCount:e.length}):ce("confirmRendered could not find player el and exhausted options to render!")}buildIframeUrl(){const e=ke(this.options);return Ve(this.portalId,this.options.id,e,this.id,this.options,this.preloaderIframeLoaded)}isIframeLoaded(){return this.iframeLoaded}getReadyQueue(){return this.outgoingMessages}onMessageReceived(e,t){A("Received message from player "+this.id,e,t);this.receivedMessages.push([e,t]);switch(e){case i.VIDEO_LOADED:this.video=t;this.handleVideoLoaded(this.video);this.trigger(new Event("videoLoaded"));break;case i.PLAYER_LOADED:this.executeReadyQueue();this.placeholderEl.setAttribute("data-hsv-status","loaded");this.timings.loadedAfterMs=ot();this.trigger(new Event("loaded"));break;case i.PLAYER_READY:this.status=_e.READY;this.placeholderEl.setAttribute("data-hsv-status","ready");this.timings.readyAfterMs=ot();this.trigger(new Event("ready"));break;case i.PLAYER_PLAY:this.status=_e.PLAYING;this.placeholderEl.setAttribute("data-hsv-status","playing");this.timings.playedAfterMs=ot();this.trigger(new Event("play"));break;case i.PLAYER_PROGRESS:if(t&&"object"==typeof t&&"currentTime"in t){const e=t.currentTime,o=new CustomEvent("progress",{detail:{currentTime:e}});this.trigger(o)}break;case i.PLAYER_SECONDS_VIEWED:t&&"object"==typeof t&&"number"==typeof t.secondsViewed&&(this.timings.secondsViewed=t.secondsViewed);break;case i.PLAYER_PAUSE:this.status=_e.PAUSED;this.placeholderEl.setAttribute("data-hsv-status","paused");this.trigger(new Event("pause"));break;case i.PLAYER_ENDED:this.status=_e.ENDED;this.placeholderEl.setAttribute("data-hsv-status","ended");this.trigger(new Event("ended"));break;case i.PLAYER_SHOW_OVERLAY:{const e=t||this.options.conversionAsset;if(!(e&&e.type&&e.id)){ce("Unexpected PLAYER_SHOW_OVERLAY message");break}this.status=_e.CONVERSION_ASSET_OVERLAY;this.placeholderEl.setAttribute("data-hsv-status",e.type.toLowerCase()+"-overlay");if(e.type===Ie.CTA)try{qe(this,e)}catch(e){ce("Error thrown rendering CTA")}else if(e.type===Ie.FORM)try{Xe(this,e)}catch(e){ce("Error thrown rendering form")}break}case i.PLAYER_ORPHANED:ce("Player did not receive SET_PAGE_META postMessage",{iframeUrl:this.iframeEl.src})}}handleVideoLoaded(e){this.iframeEl.title||(this.iframeEl.title=e.altText||e.title)}triggerPause(){this.postMessageToPlayer(i.SET_PLAYER_STATUS,{status:_e.PAUSED})}postMessageToPlayer(e,t=null,o=!0){if(this.iframeLoaded&&this.iframeEl.contentWindow)this.sendMessage(e,t);else{this.iframeEl.contentWindow||A("Could not access contentWindow for player "+this.id);if(o){A("Queuing postMessage for player "+this.id,e,t);this.outgoingMessages.push([e,t])}}}sendMessage(e,t){if(this.iframeEl&&this.iframeEl.contentWindow){A("Sending postMessage to player "+this.id,e,t);t&&"object"==typeof t&&e===i.SET_UTK&&"utk"in t&&(this.utk=t.utk);try{this.iframeEl.contentWindow.postMessage({type:e,payload:t},y(this.options))}catch(e){this.log("Failed to postMessage player",e)}}else A("sendMessage could not access contentWindow for player "+this.id)}replaceIframeFromPage(){const e=this.selectIframeElFromPage();if(e){A("Replacing iframeEl from page with ",this.iframeEl,this.iframeEl===e);this.iframeEl=e}}executeReadyQueue(){if(this.outgoingMessages.length){if(this.iframeLoaded){A(`Player ${this.id} reloaded, executing readyQueue of length ${this.outgoingMessages.length}`);if(this.utk){const{utk:e}=this;this.sendMessage(i.SET_UTK,{utk:e})}}else A(`Executing readyQueue of length ${this.outgoingMessages.length} for player ${this.id}`);this.outgoingMessages.forEach(([e,t])=>{this.sendMessage(e,t)})}this.iframeLoaded=!0}setupIntersectionObserver(){if(j(this.el)){this.initiallyVisible=!0;this.onConfirmVisible();return}const e=new IntersectionObserver(t=>{t.forEach(t=>{if(t.isIntersecting){this.log("Found player in viewport via IntersectionObserver");this.onConfirmVisible();e.disconnect()}})},{rootMargin:"100px",threshold:0});e.observe(this.el)}}function gt(e,t){if(e&&e.data&&"object"==typeof e.data&&Object.keys(i).includes(e.data.type)){t&&e.origin&&e.origin!==t&&A("isPlayerMessage saw unexpected origin",e);return!0}return!1}function yt(e,t,{placeholderEl:o}={}){!o&&t.embedId&&((o=$(e,!0))?t.renderContext="embed-id-selector":A(`Failed to find for embedId: ${t.embedId} for player: ${e}`));const n=t.portalId||pe();n&&t.id||ce("Required param `portalId` or video `id` missing");if(Ee()){t.playerType=Te.EDITOR_PREVIEW;t.renderContext="editor-preview"}const i=new mt(e,n,t,o);i.injectPlayer();return i}function Et(e,t){const o=t.portalId||pe(),n=ke(t),i=Ve(o,t.id,n,e.id,t);if(t.conversionAsset&&e.options.conversionAsset&&t.conversionAsset.id!==e.options.conversionAsset.id){const t=e.el.querySelector(".hsv-overlay");t&&t.remove()}A("Updating src of existing iframe for player "+e.id,t);e.options=t;e.iframeEl.src=i;t.altText&&(e.iframeEl.title=t.altText);return e}function bt(e,t,o,n=!0){Ce(e).forEach(e=>{e.postMessageToPlayer(t,o,n)})}function wt(e){window.addEventListener("message",t=>{if(gt(t,y())){const{data:o}=t,{type:n,embedId:r,payload:s={}}=o,a=e[r];if(!a){console.warn("Could not find embedId "+r,o);return}a.onMessageReceived(n,s);if(!(n!==i.PLAYER_PLAY||a.options.autoplay&&s.isInitial)){const t=Ce(e).filter(e=>e!==a&&e.status===_e.PLAYING);t.length&&A(`Pausing ${t.length} other currently playing players`,t);t.forEach(e=>e.triggerPause())}if(n===i.PLAYER_ANALYTICS_EVENTS){const e=JSON.parse(s);e.events&&e.events.length&&window._hsq&&e.events.forEach(e=>window._hsq.push(e))}}})}function vt(){const e=({id:e})=>{const t=document.querySelector(`.hs-form-${e}.submitted-message`);if(t){const e=pt(t);A(`Found ${e.length} players in form thank you message`);e.forEach(({el:e,options:t})=>{t.renderContext="form-inline-message";window.hsVideoApi.renderPlayer(e,t)})}};window.addEventListener("message",t=>{if(t.data&&"hsFormCallback"===t.data.type&&"onFormSubmitted"===t.data.eventName){A("Form submitted",t.data);setTimeout(()=>e(t.data))}})}function Pt(){document.addEventListener("securitypolicyviolation",e=>{A("SecurityPolicyViolationEvent event",e);const{blockedURI:t,disposition:o}=e;e.blockedURI&&R.test(t)&&ce(`CSP ${o} blocked video-embed JS`,{blockedURI:t});e.blockedURI&&e.blockedURI.includes(y())&&ce(`CSP ${o} blocked player iframe load`,{blockedURI:t})})}let At=1;function _t(e="uniq"){return`${e}${At++}`}let It=!1;function Rt({testingMode:e=!1}={}){const t=window._hsq=window._hsq||[],o=window._hsp=window._hsp||[],n=[],r={};let s,a;const l=e=>Boolean(r[e]),d=e=>n.find(([t])=>e===t);function c(...e){let t,o,i;ce("registerPlayer still being called");if("string"==typeof e[0]){t=e[0];o=e[1];o.embedId=t||_t()}else if(e[0]instanceof HTMLElement){i=e[0];o=e[1];t=o.embedId||_t()}else{if("object"!=typeof e[0]){console.warn("invalid args passed to `registerPlayer`",e);return}o=e[0];t=o.embedId||_t()}if(d(t)||l(t))A(`Player with embedId: ${t} already exists, ignoring call to registerPlayer`,o);else{if(k()){!i&&o.embedId&&(i=$(t));if(i){f(i,o);return}}n.push([t,o])}}function u(){return!!s&&(s.categories?s.categories.analytics:s.allowed)}function h(e){bt({[e]:r[e]},i.SET_PAGE_META,Ae());a&&u()&&!b()&&bt({[e]:r[e]},i.SET_UTK,{utk:a})}function p(e,t,o){r[e]=yt(e,t,o);b()||h(e);return r[e]}function f(e,t){let o,n;if("string"==typeof e){o=e;n=$(o);if(!n){console.warn(`Element id ${e} not found`);return null}}else{if(!(e instanceof HTMLElement)){console.warn("First argument to renderPlayer must be an id string or HTMLElement");return null}o=t.embedId||_t();n=e}if(l(o)){A(`Player with embedId: ${o} already exists, ignoring call to renderPlayer`,t);return null}return p(o,t,{placeholderEl:n})}function m(e,t){const o=v(e);if(!o){A(`Could not find player id ${e} to update`);return null}Et(o,t);return o}function y(e){a=e;if(s&&a)if(u()){A(`Received utk ${a} privacyConsent`,JSON.stringify(s));bt(r,i.SET_UTK,{utk:a})}else{A("Received privacyConsent but not allowed",a,s);bt(r,i.SET_UTK,null)}else A("Could not obtain utk cookie and privacyConsent",a,s)}function E(){o.push(["addPrivacyConsentListener",e=>{s=e;t.push(["addUserTokenListener",y])}])}function w(){return r}function v(e){return w()[e]}function _(){return Ce(r).reduce((e,t)=>{t.receivedMessages.forEach(o=>{e.push([t.id,o[0],o[1]])});return e},[])}function I(){Ce(r).forEach(e=>e.triggerPause())}function R(){pt().forEach(({el:e,options:t})=>{if(t.embedId){t.renderContext=Y(e,".widget-type-rich_text")?"rich-text-placeholder":"onload-placeholder";be()&&(t.renderContext="share-page");p(t.embedId,t,{placeholderEl:e})}});ft().forEach(({el:e,options:t})=>{if(t.embedId){t.renderContext=be()?"hubl-iframe-share-page":"hubl-iframe";p(t.embedId,t,{placeholderEl:e})}})}function T(){setTimeout(()=>{const e=Object.values(w()).find(e=>e.confirmedVisible);e?A("Not inserting preloader iframe as at least one player is already visible & loading:",e):U(()=>{Object.values(w()).forEach(e=>{e.preloaderIframeLoaded=!0})})},500)}function S(){n.forEach(([e,t])=>{p(e,t)});wt(r);It=!0;if(!b()){T();E();R();Pt();vt();window._hsVideoReady&&Array.isArray(window._hsVideoReady)&&setTimeout(()=>window._hsVideoReady.forEach(e=>e()))}}if(It&&!e)A("loader already initialized, not listening for document load");else if(k())try{S()}catch(e){ue(e,{source:"already-loaded"})}else{document.addEventListener("DOMContentLoaded",()=>{try{S()}catch(e){ue(e,{source:"DOMContentLoaded"})}});window.addEventListener("content-analytics-code-not-loaded",()=>y(null))}const C={registerPlayer:c,renderPlayer:f,updatePlayer:m,getPlayer:v,getPlayers:()=>Ce(w()),getPerformanceMetrics:()=>it(Object.values(r)),pauseAllPlayers:I};return e||P()||g()?Object.assign({},C,{getPlayerMessages:_,triggerLoad:S,renderPlaceholders:R}):C}o.d(t,"renderPlayer",(function(){return St}));o.d(t,"updatePlayer",(function(){return Ct}));let Tt=window.hsVideoApi;Tt?A("hsVideoApi found on page, not calling createLoader"):window.hsVideoApi=Tt=Rt();const St=Tt.renderPlayer,Ct=Tt.updatePlayer}});
//# sourceMappingURL=loader.js.map